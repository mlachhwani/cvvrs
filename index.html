<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CVVRS ANALYSIS | SECR</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- CSV Parser -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

<!-- PDF Engine Dependency -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>

<link href="styles/style.css" rel="stylesheet">
</head>
<body>

<div class="container">

  <h1>CVVRS ANALYSIS REPORT</h1>

  <!-- ANALYSIS DATE -->
  <section>
    <label>Analysis Date</label>
    <input id="analysis_date" readonly>
  </section>

  <!-- CLI DETAILS -->
  <section>
    <label>CLI ID</label>
    <input id="cli_id" placeholder="Enter CLI ID">

    <label>CLI NAME</label>
    <input id="cli_name" placeholder="Auto Filled" readonly>
  </section>

  <!-- TRAIN DETAILS -->
  <section>
    <label>Train No</label>
    <input id="train_no">

    <label>Date of Working</label>
    <input id="date_work" type="datetime-local">

    <label>Loco No</label>
    <input id="loco_no">

    <label>From Station (CODE)</label>
    <input id="from_station">

    <label>From Station (NAME)</label>
    <input id="from_station_name" readonly>

    <label>To Station (CODE)</label>
    <input id="to_station">

    <label>To Station (NAME)</label>
    <input id="to_station_name" readonly>
  </section>

  <!-- CREW DETAILS -->
  <section>
    <h3>CREW DETAILS</h3>

    <label>LP ID</label>
    <input id="lp_id">

    <label>LP NAME</label>
    <input id="lp_name" readonly>

    <label>LP DESIGNATION</label>
    <input id="lp_desig" readonly>

    <label>LP G/CLI</label>
    <input id="lp_gcli" readonly>

    <label>ALP ID</label>
    <input id="alp_id">

    <label>ALP NAME</label>
    <input id="alp_name" readonly>

    <label>ALP DESIGNATION</label>
    <input id="alp_desig" readonly>

    <label>ALP G/CLI</label>
    <input id="alp_gcli" readonly>
  </section>

  <!-- OBSERVATIONS -->
  <section>
    <h3>OBSERVATIONS</h3>
    <div id="obs_container"></div>
  </section>

  <!-- FINAL REMARKS -->
  <section>
    <h3>FINAL REMARKS</h3>
    <textarea id="remarks" rows="3">NO ABNORMALITIES OBSERVED</textarea>
  </section>

  <button id="submit_btn">SAVE & GENERATE PDF</button>

</div>

<script src="scripts/masters.js"></script>
<script src="scripts/obs_master.js"></script>
<script src="scripts/obs_ui.js"></script>

<script>
/* Set analysis date (read-only) */
const d = new Date();
document.getElementById("analysis_date").value = d.toISOString().split("T")[0];

/* Auto-run UI render */
document.addEventListener("DOMContentLoaded", () => {
  if (window.OBS_UI) window.OBS_UI.render();
});
</script>

</body>
</html>
